# 麻将游戏

## 配置
> 新建数据库"MJ",运行dbTool.py建表  
> 修改config.py中数据库信息及服务器地址  
> 修改clientConfig.py中的登陆服地址  

## 运行
> 分别在当前目录下运行server.bat,client.bat  
> 出牌或者决策选择输入对应序号并回车  
## 接口
> 后续添加说明
 
## 术语解释

* 刻：三张一样的
* 不计：不把低价值的番再加进去
* 字牌：指风牌和箭牌，风牌为东、南、西、北。箭牌为中、发、白

## 番种
> 简化国标番种规则，后续逐步完善  
> 参考
> * [规则](https://baike.baidu.com/item/中国麻将竞赛规则)
> * [规则](https://baike.baidu.com/item/国标麻将/1287558?fr=aladdin)
> * [GitHub](https://github.com/sticnarf/Mahjong#88番)

### 88番
* 大四喜（不计碰碰和：4副碰（杠）+将牌）：由4副风碰（杠）组成的和牌  
* 大三元（不计箭刻）：和牌中，有中发白3副刻子
> * 十三幺（不计五门齐、单钓将、门前清、混幺九）：三种序数牌的1、9牌，七种字牌及其中一对作将牌组成的和牌
* 绿一色（无发记清一色，有发记混一色）:由23468条及发字中的任何牌组成的和牌
* 四杠（不计碰碰和、三杠，暗杠另计）：4个杠，因和牌时总共18张牌

### 64番
* 小四喜：风牌的三副刻子（杠），第四种风牌作将
* 小三元（不计箭刻）：和牌中有箭牌的两副刻子（杠）、另一种箭牌作将牌
* 字一色（不计碰碰和）：字牌的刻子（杠）、将牌组成的和牌
* 四暗刻（不计门前清、碰碰和）：4个暗刻（暗杠），可计不求人
* 清幺九（不计碰碰和）：由序数牌1、9刻子（杠）、将牌组成的和牌

### 48番
* 一色四同顺（不计一色三同顺、一般高）：一种花色4副序数相同的顺子

### 32番
* 三杠（暗杠另计）：任何3副杠子（明暗不限）加上任何一对（将）及另一手牌成和
* 混幺九（不计碰碰和）：由字牌和序数牌一、九组成的和牌

### 24番
> * 七对（不计门前清、单钓将）：由7个对子组成的和牌
* 清一色：由一种花色的序数牌组成的和牌
* 一色三同顺（不计一般高）：一种花色3副序数相同的顺子

### 16番
* 三同刻:有3个序数相同的刻子（杠）
* 三暗刻:有3个暗刻，如果满足“碰碰和”牌型，可同时计算

### 8番
* 三色三同顺（不计喜相逢）:和牌时，有3种花色3副序数相同的顺子

### 6番
* 碰碰和:4副刻子（或杠）、将牌组成的和牌
* 混一色:由一种花色序数牌及字牌组成的和牌
* 五门齐:和牌时3种序数牌、风、箭牌齐全

### 2番
* 门前清（因取消了不求人，自摸和牌及和他家打出的牌都记）:没有吃、碰、明杠而听牌，和别人打出的牌
* 断幺:和牌中没有一、九及字牌
* 平和:由4副顺子及序数牌作将组成的和牌
* 箭刻（可算多次）:由中、发、白3张相同的牌组成的刻子
* 暗杠（可算多次）:自抓4张相同的牌开杠

### 1番
* 自摸:自己抓进牌成和牌
* 一般高（可算多次）:由一种花色2副相同的顺子组成的牌
* 喜相逢（可算多次）:2种花色2副序数相同的顺子
* 明杠（可算多次）:明杠或加杠
* 单钓将:钓单张牌作将成和

##每个玩家都要统计的番数项
### 2番
* 箭刻（可算多次）:由中、发、白3张相同的牌组成的刻子
* 暗杠（可算多次）:自抓4张相同的牌开杠
### 1番
* 一般高（可算多次）:由一种花色2副相同的顺子组成的牌
* 喜相逢（可算多次）:2种花色2副序数相同的顺子
* 明杠（可算多次）:明杠或加杠

## 记分：
> 由底分，基本分及罚分组成
>> 1. 底分：指和牌后，未和牌方必须向和牌方所付的比赛分，分值为8分。
>> 2. 基本分：指和牌后，各个番种分数和总和。
>> 3. 罚分：每盘结束时扣除：需要在0.5秒内向服务器发出指令，超过0.5秒按每100毫秒1分。

1. 自摸：（底分+基本分）×3方（未和牌方）-罚分，输家减去（底分+基本分+罚分）
2. 点炮：底分×3方（未和牌方）+基本分×1方（点和方）-罚分，输家减去底分+罚分，点炮者减去（底分+基本分+罚分）
 
### 胡牌基本类型：一对将+四句话

### 通信消息格式定义
> json:["event":{args}]  
> login,hall,game各自监听一个端口，使用socketserver为每个连接创建线程并维护各自的连接池，game中将逻辑实例化对象从init传入MyTCPHandler或直接实例化一个全局变量(socketserver.BaseRequestHandler)中  
> 客户端根据需要从服务器获取login,hall,game的address,创建和关闭socket，最多三个  